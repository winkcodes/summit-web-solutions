---
import { Menu } from 'lucide-react';
import Navigation from './Navigation.astro';
import MobileMenu from './MobileMenu.astro';
import { SITE_CONFIG } from '../../config/site';

export interface Props {
  currentPath?: string;
  transparent?: boolean;
}

const { currentPath = Astro.url.pathname, transparent = false } = Astro.props;
---

<header 
  id="main-header"
  class={`main-header ${transparent ? 'header-transparent' : ''}`}
  role="banner"
>
  <div class="header-container">
    <!-- Logo -->
    <div class="header-logo">
      <a 
        href="/" 
        class="logo-link"
        aria-label={`${SITE_CONFIG.title} - Home`}
      >
        <div class="logo-content">
          <div class="logo-icon">
            <svg 
              viewBox="0 0 32 32" 
              class="w-8 h-8"
              aria-hidden="true"
            >
              <defs>
                <linearGradient id="logo-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                  <stop offset="0%" style="stop-color:#0f172a"/>
                  <stop offset="100%" style="stop-color:#7c3aed"/>
                </linearGradient>
              </defs>
              <path 
                d="M16 2L26 8v16l-10 6L6 24V8l10-6z M16 6L10 9v14l6 3.5L22 23V9l-6-3z" 
                fill="url(#logo-gradient)"
              />
              <circle cx="16" cy="16" r="3" fill="white"/>
            </svg>
          </div>
          <div class="logo-text">
            <span class="logo-main">{SITE_CONFIG.title}</span>
            <span class="logo-tagline">Web Solutions</span>
          </div>
        </div>
      </a>
    </div>
    
    <!-- Desktop Navigation -->
    <Navigation currentPath={currentPath} variant="desktop" />
    
    <!-- CTA Button (Desktop) -->
    <div class="header-cta">
      <a href="/contact" class="btn-primary">
        Get Started
      </a>
    </div>
    
    <!-- Mobile Menu Button -->
    <div class="header-mobile">
      <button
        id="mobile-menu-button"
        class="mobile-menu-button"
        aria-label="Open navigation menu"
        aria-expanded="false"
        type="button"
      >
        <Menu size={24} />
      </button>
    </div>
  </div>
</header>

<!-- Mobile Menu -->
<MobileMenu currentPath={currentPath} />

<style>
  .main-header {
    @apply fixed top-0 left-0 right-0 z-40 bg-white shadow-sm border-b border-gray-100 transition-all duration-300;
  }
  
  .header-transparent {
    @apply bg-white/95 backdrop-blur-md border-transparent;
  }
  
  .header-scrolled {
    @apply bg-white/95 backdrop-blur-md shadow-lg border-gray-200;
  }
  
  .header-hidden {
    @apply -translate-y-full;
  }
  
  .header-container {
    @apply container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16 lg:h-20;
  }
  
  .header-logo {
    @apply flex-shrink-0;
  }
  
  .logo-link {
    @apply flex items-center space-x-3 text-gray-900 hover:text-primary transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 rounded-lg;
  }
  
  .logo-content {
    @apply flex items-center space-x-3;
  }
  
  .logo-icon {
    @apply flex-shrink-0;
  }
  
  .logo-text {
    @apply hidden sm:flex flex-col;
  }
  
  .logo-main {
    @apply text-lg lg:text-xl font-bold leading-tight;
  }
  
  .logo-tagline {
    @apply text-xs lg:text-sm text-gray-600 leading-tight;
  }
  
  .header-cta {
    @apply hidden lg:flex;
  }
  
  .header-mobile {
    @apply flex lg:hidden;
  }
  
  .mobile-menu-button {
    @apply p-2 -mr-2 text-gray-700 hover:text-primary hover:bg-gray-100 transition-colors duration-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2;
  }
  
  /* Logo animation on hover */
  .logo-link:hover .logo-icon svg {
    @apply transform rotate-12 scale-110;
    transition: transform 0.3s ease;
  }
  
  /* Responsive adjustments */
  @media (max-width: 640px) {
    .logo-main {
      @apply text-base;
    }
    
    .header-container {
      @apply px-4 h-14;
    }
  }
</style>